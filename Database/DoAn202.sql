DROP SCHEMA IF EXISTS `DoAn_202`;
CREATE SCHEMA `DoAn_202`;
USE `DoAn_202`;

CREATE TABLE `USER`(
  `ID` BIGINT PRIMARY KEY NOT NULL,
  `USERNAME` VARCHAR(100),
  `PWD` VARCHAR(100)
);
CREATE TABLE `HOUSE`(
  `ID` BIGINT PRIMARY KEY NOT NULL,
  `NAME` VARCHAR(100),
  `URL_IMG` VARCHAR(100),
  `USER_ID` BIGINT,
  FOREIGN KEY (USER_ID) REFERENCES USER(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE `ROOM`(
  `ID` BIGINT PRIMARY KEY NOT NULL,
  `NAME` VARCHAR(100),
  `HOUSE_ID` BIGINT,
  `URL_IMG` VARCHAR(100),
  FOREIGN KEY (HOUSE_ID) REFERENCES HOUSE(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE `LED`(
  `KEY` VARCHAR(100) PRIMARY KEY NOT NULL,
  `ROOM_ID` BIGINT,
    FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE `FAN`(
  `KEY` VARCHAR(100) PRIMARY KEY NOT NULL,
  `ROOM_ID` BIGINT,
    FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE `GAS`(
  `KEY` VARCHAR(100) PRIMARY KEY NOT NULL,
  `ROOM_ID` BIGINT,
    FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE `TEMPERATURE`(
  `KEY` VARCHAR(100) PRIMARY KEY NOT NULL,
  `ROOM_ID` BIGINT,
    FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE `METHOD`(
  `ID` BIGINT PRIMARY KEY NOT NULL,
  `NAME` VARCHAR(100),
  `ROOM_ID` BIGINT,
    FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ID) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE `DEVICE_IN_METHOD`(
    `ID` BIGINT PRIMARY KEY NOT NULL,
    `DEVICE_NAME` VARCHAR(100),
    `ROOM_ID` BIGINT,
    `METHOD_ID` BIGINT,
    FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ID) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (METHOD_ID) REFERENCES METHOD(ID) ON DELETE CASCADE ON UPDATE CASCADE
);

